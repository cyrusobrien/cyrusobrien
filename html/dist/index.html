<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.12.0">
<title>These are the milestones your jurisdiction should priortize as you work to improve probation: | CQI Mockup</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_import/custom-sans-serif.43b97a8c.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_import/custom-sans-serif.43b97a8c.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="modulepreload" href="./_observablehq/client.0d99af51.js">
<link rel="modulepreload" href="./_observablehq/runtime.8eb97cbb.js">
<link rel="modulepreload" href="./_observablehq/stdlib.8048ec16.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/7055d4c5.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/063eb405.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.9d076414.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/c68fbd73.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/e95f898e.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/d44feff9.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/5830b12a.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/84d7b8e9.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/2c0cdfa2.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/626bedc4.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/00c41b5d.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/b5f7cdc6.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/b22c5864.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/407f7a1f.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/6f15f633.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/ef1ec490.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/5e1ff060.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/5851d7ef.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/dcd02767.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/f1db2593.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/034b7bcb.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/4bb53638.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/bbafde58.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/aa5b35a8.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/32c7fec2.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/567840a0.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/cf9b720b.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/5dcd62f4.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/f8e03c56.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/5bc129e1.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/19c92b44.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/f31b5398.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/8debb4ba.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/4b0cc581.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/5eed35fd.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/e67acb27.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/8ac9039b.js">
<script type="module">

import {define} from "./_observablehq/client.0d99af51.js";

define({id: "2c9ce35e", inputs: ["ResizeObserver","parent","invalidation"], outputs: ["observer"], body: (ResizeObserver,parent,invalidation) => {
const observer = new ResizeObserver(([entry]) => parent.postMessage({height: entry.target.offsetHeight}, "*"));
observer.observe(document.documentElement);
invalidation.then(() => observer.disconnect());
return {observer};
}});

define({id: "55bed75b", inputs: ["count","width"], outputs: ["show","fontsize"], body: (count,width) => {
 // document.getElementById("results").style.display = "none";
const show = count == 0 ? document.getElementById("results").style.display = "none": document.getElementById("results").style.display = "block"

const fontsize = width > 580 ? 16 : width > 500 ? 12 : width > 428 ? 10 : 8;
return {show,fontsize};
}});

define({id: "d6d05c6c", inputs: ["chart","display"], body: async (chart,display) => {
display(await(
chart
))
}});

define({id: "20d825fc", inputs: ["view","Inputs"], outputs: ["excel_input"], body: (view,Inputs) => {
const excel_input = view(Inputs.radio(
  ["All", "Excelling Areas", "Areas for Improvement"],
  { value: "All", label: "Choose which categories to highlight" }
))

return {excel_input};
}});

define({id: "9edd47db", mode: "inline", inputs: ["output_data","display"], body: async (output_data,display) => {
display(await(
output_data.map((d) => d.milestone)[0]
))
}});

define({id: "aba34339", mode: "inline", inputs: ["output_data","display"], body: async (output_data,display) => {
display(await(
output_data.map((d) => d.milestone)[1]
))
}});

define({id: "ddaa324f", mode: "inline", inputs: ["output_data","display"], body: async (output_data,display) => {
display(await(
output_data.map((d) => d.milestone)[2]
))
}});

define({id: "da8abf7d", inputs: ["view","SimpleRange"], outputs: ["m1","m2","m3","m4","m5"], body: (view,SimpleRange) => {
const m1 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "The department maintains partnerships with community organizations and other caring adults in neighborhoods where young people on probation live. Probation staff rely on those partnerships to offer positive opportunities and connections to individuals outside the system who can engage them in constructive activities where they can explore their interests, build skills, develop their talents, and contribute to the well-being of their communities."
}))

const m2 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "The department employs or contracts with peer mentors or navigators to support families."
}))


const m3 = view(SimpleRange([1, 11], {
  value: 0,
  label: "Fines and fees are not imposed on young people or their families."
}))

const m4 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "Youth and families served by the system are involved in juvenile justice planning and compensated accordingly."
}))

const m5 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "Probation and other court actors routinely examine their own policies and practices through a family lens and regularly make revisions to better accommodate the needs of families."
}))

return {m1,m2,m3,m4,m5};
}});

define({id: "d4f2602d", inputs: ["view","SimpleRange"], outputs: ["m6","m7","m8","m9"], body: (view,SimpleRange) => {
const m6 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "Staff culture encourages courageous conversations about the intersection of race and the departmentâ€™s work."
}))

const m7 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "Data is disaggregated by race, and results are analyzed to identify decision points exacerbating disparities and opportunities to advance racial equity."
}))


const m8 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "A high-level committee or work group within the department is empowered to pursue an agenda to promote racial and ethnic equity."
}))

const m9 = view(SimpleRange([1, 11], {
  value: 0,
  label:
    "Equity problems are identified and monitored, and strategies are developed to make meaningful and measurable improvements."
}))

return {m6,m7,m8,m9};
}});

define({id: "db140e8b", inputs: ["Mutable","htl","input_data","Event","view"], outputs: ["count","ui","scrollFunction","topFunction","data"], body: (Mutable,htl,input_data,Event,view) => {
const count = Mutable(0); 

const ui = htl.html`<div>
  <button onclick=${() => {
    // Increment the count
    ++count.value;

    // Update the UI value with input_data
    ui.value = input_data; 

    // Notify Observable of the value change
    ui.dispatchEvent(new Event("input")); 

    // Call the topFunction()
    topFunction();
  }}>Submit</button>
</div>`;

// Ensure this updates correctly in the Observable runtime
view(ui);


// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    ui.style.display = "block";
  } else {
    ui.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

const data = view(ui)


return {count,ui,scrollFunction,topFunction,data};
}});

define({id: "536ff05e", inputs: ["d3","html","data","chartWidth","height","arc","highlight","myarc","radius","pi","fontsize"], outputs: ["svg","container","color","g","gr","tooltip","chart"], body: (d3,html,data,chartWidth,height,arc,highlight,myarc,radius,pi,fontsize) => {
// Chart

  const svg = d3.create("svg").attr("width", 625).attr("height", 625);

  const container = html`<div>
  <style>.tooltip {
    font: sans-serif 12pt;
    background: #eeeeeeee;
    pointer-events: none;
    border-radius: 2px;
    padding: 5px;
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;

  }</style>

  <div class="tooltip"></div>
  ${svg.node()}

  </div>`;

  var color = d3
    .scaleOrdinal()
    .domain(data.map((d) => d.standard))
    .range([
      "blue",
      "orange",
      "red",
      "cyan",
      "green",
      "pink",
      "purple",
      "lightblue",
      "brown",
      "gray"
    ]);

  const g = svg
    .append("g")
    .attr(
      "transform",
      `translate(${chartWidth / 2}, ${height / 2}) rotate(0) scale(-1, 1)`
    );
  g.selectAll("path")
    .data(data)
    .join("path")
    .attr("d", arc)
    .attr("fill", (d) => color(d.standard))
    .attr("opacity", highlight)
    .attr("class", "arc")
    .attr("stroke", "white")
    .on("mouseenter", (evt, d) => {
      const mx =
        d3.pointer(evt)[0] > chartWidth / 2
          ? chartWidth / 2
          : chartWidth / 2 - d3.pointer(evt)[0];
      const my = d3.pointer(evt)[1] + height / 2;
      const tooltipText = `
       ${d.milestone}`;
      tooltip
        .style("top", `${my}px`)
        .style("left", `${mx}px`)
        .html(tooltipText);
    })
    .on("mouseout", () => tooltip.text(""));

  /////////////////////////////////
  ////// LABELS and Markers//////////////////
  ////////////////////////////////
  let gr = svg.append("g");

 

  ////// LABELS

  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: 0,
        endAngle: pi(47.35)
      })
    )
    //   .attr("stroke", "black")
    .attr("id", "partnership");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#partnership")
    .text("Partnerships")
    .attr("startOffset", "25%");
  //

  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(47),
        endAngle: pi(85)
      })
    )
    .attr("fill", "none")
    .attr("id", "race");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#race")
    .text("Race Equity");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(85),
        endAngle: pi(123)
      })
    )
    .attr("fill", "none")
    .attr("id", "leadership");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#leadership")
    .text("Leadership");

  //

  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(152),
        endAngle: pi(123)
      })
    )
    .attr("fill", "none")
    .attr("id", "engagement");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", 16)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#engagement")
    .text("Staff Engagement");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(189),
        endAngle: pi(152)
      })
    )
    .attr("fill", "none")
    .attr("id", "min-confine");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", 16)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#min-confine")
    .text("Minimizing Confinement");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(246),
        endAngle: pi(189)
      })
    )
    .attr("fill", "none")
    .attr("id", "diversion");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", 16)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#diversion")
    .text("Diversion");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(275.6),
        endAngle: pi(246)
      })
    )
    .attr("fill", "none")
    .attr("id", "data");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", 16)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#data")
    .text("Data Use");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(274.5),
        endAngle: pi(322)
      })
    )
    .attr("fill", "none")
    .attr("id", "plan");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#plan")
    .text("Individualized Planning");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(322),
        endAngle: pi(340)
      })
    )
    .attr("fill", "none")
    .attr("id", "conditions");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#conditions")
    .text("Conditions");

  //
  gr.append("path")
    .attr("transform", `translate(${height / 2},${chartWidth / 2})`)
    .attr(
      "d",
      myarc({
        innerRadius: radius(d3.max(data.map((d) => d.value))),
        outerRadius: radius(d3.max(data.map((d) => d.value))),
        startAngle: pi(340),
        endAngle: pi(360)
      })
    )
    .attr("fill", "none")
    .attr("id", "alt");

  gr.append("text")
    .style("fill", "#000")
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", fontsize)
    .attr("dy", -6)
    .append("textPath")
    .attr("startOffset", "25%")
    .attr("xlink:href", "#alt")
    .text("Alternatives");

  // A selection for the tooltip

  const tooltip = d3.select(container).select(".tooltip");

  const chart = container;
return {svg,container,color,g,gr,tooltip,chart};
}});

define({id: "14fc2344", inputs: ["Event","htl"], outputs: ["set","forwardInput","SimpleRange","wrapLabel"], body: (Event,htl) => {
// Dependencies for sliders. Thank you to Toph Tucker @tophtucker/simple-slider-with-label

function set(input, value) {
  input.value = value;
  input.dispatchEvent(new Event("input", {bubbles: true}));
}

const forwardInput = (input, template) => {
  const node = template(input);
  input.addEventListener("input", ({target}) => set(node, target.valueAsNumber ?? target.value))
  set(node, input.valueAsNumber ?? input.value);
  return node
}

const SimpleRange = (([min, max], {label, value, step = 0.01}) => forwardInput(
  htl.html`<input type=range min=${min} max=${max} step=${step} value=${value}>`,
  wrapLabel(label)))

const wrapLabel = (label) => (input) =>
  htl.html`<form class="oi1">
  <label>${label}</label>
  ${input}
</form>

<style>
/* from https://github.com/observablehq/inputs/blob/main/src/style.css */
.oi1 {
  --length2: 6.5px;
  --length3: 13px;
  --label-width: 500px;
  --input-width: 240px;
  font: 14px/1.5 var(--sans-serif);
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  min-height: 25.5px;
  margin: var(--length3) 0;
}
.oi1 > label {
  width: 100%;
  padding-bottom: 3px;
}
.oi1 > input[type=range] {
  margin: 0;
}
@media only screen and (min-width: 30em) {
  .oi1 {
    flex-wrap: nowrap;
    width: calc(var(--input-width) + var(--label-width));
    max-width: 100%;
    margin: initial;
  }
  .oi1 > label {
    flex-shrink: 0;
    align-self: start;
    padding: 5px 0 4px 0;
    width: var(--label-width);
    margin-right: var(--length2);
  }
}
</style>
`
return {set,forwardInput,SimpleRange,wrapLabel};
}});

define({id: "84008734", inputs: ["d3","width","data","excel_input"], outputs: ["myarc","pi","chartWidth","height","perimeter","r","perimeterDifference","diff","innerRadius","wedgeAngle","arc","arc_need","radius","xAxis","angle","highlight","percentile25","percentile75"], body: (d3,width,data,excel_input) => {
// Dependencies for chart

const myarc = d3.arc();

const pi = (x) => (x * Math.PI) / 180;

const chartWidth = width > 625 ? 625 : width;

const height = chartWidth;

const perimeter = Math.min(chartWidth, 900);

const r = perimeter / (2 * Math.PI);

const perimeterDifference = d3.scaleLinear().range([perimeter, 0.1]);

const diff = perimeterDifference(0);

const innerRadius = 40;

const wedgeAngle = diff / r;

const arc = d3
  .arc()
  .startAngle((d, i) => angle(i))
  .endAngle((d, i) => angle(i) + angle.bandwidth())
  .innerRadius((d) => radius(0))
  .outerRadius((d) => radius(Math.round(d.value)));

const arc_need = d3
  .arc()
  .startAngle((d, i) => angle(i))
  .endAngle((d, i) => angle(i) + angle.bandwidth())
  .innerRadius((d) => radius(0))
  .outerRadius((d) => radius(10 - d.value));

const radius = d3
  .scaleRadial()
  .domain([0, d3.max(data, (d) => d.value)])
  .range([innerRadius, perimeter * 0.45]);

const xAxis = (g) =>
  g
    .attr("transform", `translate(${chartWidth / 2}, ${height / 2}) rotate(-90)`)
    .attr("text-anchor", "middle")
    .call((g) =>
      g
        .selectAll("g")
        .data(data.map((d) => d.standard_text))
        .join("g")
        .attr(
          "transform",
          (d, i, arr) => `
          rotate(${(i * 360) / arr.length})
          translate(${radius(10)},0)
        `
        )
        .call((g) =>
          g
            .append("line")
            .attr("x1", -5)
            .attr("x2", radius(10) - innerRadius + 10)
            .style("stroke", "#aaa")
        )
        .call((g) =>
          g
            .append("text")
            .attr("transform", (d, i, arr) =>
              i === 1 || i === 2
                ? "rotate(90) translate(10,0)"
                : i === 6 || i == 7
                ? "rotate(270) translate(10,0)"
                : ((i * 360) / arr.length) % 360 > 180
                ? "rotate(90)translate(10,0)"
                : "rotate(-90)translate(-10,0)"
            )
            .style("font-family", "sans-serif")
            .style("font-size", 10)
            .text((d) => d)
        )
    );

const angle = d3
  .scaleBand()
  .domain(d3.range(data.length))
  .range([Math.PI + wedgeAngle / 2, Math.PI - wedgeAngle / 2]);


const highlight = excel_input == "All"
  ? 0.8
  : excel_input == "Excelling Areas"
  ? (d) => (d.value > percentile75(data.map((d) => d.value)) ? 0.98 : 0.1)
  : excel_input == "Areas for Improvement"
  ? (d) => (d.value < percentile25(data.map((d) => d.value)) ? 0.98 : 0.1)
  : 0.8;


const percentile25 = (arr) => {
  if (arr.length === 0) return null; // Handle empty array

  // Sort the array in ascending order
  const sorted = [...arr].sort((a, b) => a - b);

  // Calculate the index for the 25th percentile
  const index = (25 / 100) * (sorted.length - 1);

  // If the index is an integer, return the value at that index
  if (index % 1 === 0) {
    return sorted[index];
  }

  // If not, interpolate between the two closest values
  const lower = Math.floor(index);
  const upper = Math.ceil(index);
  const weight = index - lower;

  // Linear interpolation between the two closest values
  return sorted[lower] * (1 - weight) + sorted[upper] * weight;
};


const percentile75 = (arr) => {
  if (arr.length === 0) return null; // Handle empty array

  // Sort the array in ascending order
  const sorted = [...arr].sort((a, b) => a - b);

  // Calculate the index for the 25th percentile
  const index = (75 / 100) * (sorted.length - 1);

  // If the index is an integer, return the value at that index
  if (index % 1 === 0) {
    return sorted[index];
  }

  // If not, interpolate between the two closest values
  const lower = Math.floor(index);
  const upper = Math.ceil(index);
  const weight = index - lower;

  // Linear interpolation between the two closest values
  return sorted[lower] * (1 - weight) + sorted[upper] * weight;
};
return {myarc,pi,chartWidth,height,perimeter,r,perimeterDifference,diff,innerRadius,wedgeAngle,arc,arc_need,radius,xAxis,angle,highlight,percentile25,percentile75};
}});

define({id: "37cfae95", inputs: ["data"], outputs: ["output_data"], body: (data) => {
  const output_data = data.slice().sort((a, b) => {
    if (a.value !== b.value) {
      return a.value - b.value; // Ascending by value
    }
    return b.rank - a.rank; // Descending by rank for ties
  });

return {output_data};
}});

define({id: "7d6c3b83", body: () => {
//output_data
}});

define({id: "ec9cfbb9", inputs: ["m1","m2","m3","m4","m5","m6","m7","m8","m9"], outputs: ["input_data"], body: (m1,m2,m3,m4,m5,m6,m7,m8,m9) => {
// Data for chart

const input_data = [
  {
    "Original.order": 18,
    standard: 4,
    new_order: 1,
    value: m1,
    rank: 27,
    milestone:
      "The department maintains partnerships with community organizations and other caring adults in neighborhoods where young people on probation live. Probation staff rely on those partnerships to offer positive opportunities and connections to individuals outside the system who can engage them in constructive activities where they can explore their interests, build skills, develop their talents, and contribute to the well-being of their communities."
  },
  {
    "Original.order": 19,
    standard: 4,
    new_order: 2,
    value: m2,
    rank: 38,
    milestone:
      "The department employs or contracts with peer mentors or navigators to support families."
  },
  {
    "Original.order": 20,
    standard: 4,
    new_order: 3,
    value: m3,
    rank: 12,
    milestone:
      "Fines and fees are not imposed on young people or their families."
  },
  {
    "Original.order": 21,
    standard: 4,
    new_order: 4,
    value: m4,
    rank: 6,
    milestone:
      "Youth and families served by the system are involved in juvenile justice planning and compensated accordingly."
  },
  {
    "Original.order": 22,
    standard: 4,
    new_order: 5,
    value: m5,
    rank: 36,
    milestone:
      "Probation and other court actors routinely examine their own policies and practices through a family lens and regularly make revisions to better accommodate the needs of families."
  },
  {
    "Original.order": 7,
    standard: 2,
    new_order: 6,
    value: m6,
    rank: 13,
    milestone:
      "Staff culture encourages courageous conversations about the intersection of race and the departmentâ€™s work."
  },
  {
    "Original.order": 8,
    standard: 2,
    new_order: 7,
    value: m7,
    rank: 2,
    milestone:
      "Data is disaggregated by race, and results are analyzed to identify decision points exacerbating disparities and opportunities to advance racial equity."
  },
  {
    "Original.order": 9,
    standard: 2,
    new_order: 8,
    value: m8,
    rank: 33,
    milestone:
      "A high-level committee or work group within the department is empowered to pursue an agenda to promote racial and ethnic equity."
  },
  {
    "Original.order": 10,
    standard: 2,
    new_order: 9,
    value: m9,
    rank: 34,
    milestone:
      "Equity problems are identified and monitored, and strategies are developed to make meaningful and measurable improvements."
  },
  {
    "Original.order": 1,
    standard: 1,
    new_order: 35,
    value: 7,
    rank: 37,
    milestone:
      "Convenings that include leadership, staff, community, family, and young people with lived experience are conducted at least bi-annually to evaluate and plan for probation transformation."
  },
  {
    "Original.order": 2,
    standard: 1,
    new_order: 36,
    value: 5,
    rank: 1,
    milestone:
      "The primary tenets of probation transformation (expanding Diversion, minimizing out-of-home placements, limiting probation supervision time and promoting youth well-being, achieving equity for youth of color, and relying on community-based organizations, youth, and families as true partners) are included in training programs for new probation staff."
  },
  {
    "Original.order": 3,
    standard: 1,
    new_order: 37,
    value: 6,
    rank: 22,
    milestone:
      "System leaders meet annually to redirect and reallocate funds to support an increase in positive youth development services."
  },
  {
    "Original.order": 4,
    standard: 1,
    new_order: 38,
    value: 4,
    rank: 23,
    milestone:
      "Department leadership continually seeks and responds to feedback from young people, families, staff and other stakeholders."
  },
  {
    "Original.order": 13,
    standard: 3,
    new_order: 10,
    value: 4,
    rank: 24,
    milestone:
      "Staff with active caseloads are always included in discussions about implementing new or revised policies."
  },
  {
    "Original.order": 14,
    standard: 3,
    new_order: 11,
    value: 5,
    rank: 35,
    milestone:
      "Probation leadership prioritizes communication between staff and management, and a mechanism exists to support it."
  },
  {
    "Original.order": 15,
    standard: 3,
    new_order: 12,
    value: 7,
    rank: 25,
    milestone:
      "Probation leadership encourages staff to share ideas and review system trends to solve problems and track solutions."
  },
  {
    "Original.order": 25,
    standard: 5,
    new_order: 13,
    value: 4,
    rank: 3,
    milestone:
      "At least 70% of new probation cases are based on an underlying felony adjudication."
  },
  {
    "Original.order": 26,
    standard: 5,
    new_order: 14,
    value: 7,
    rank: 4,
    milestone:
      "Before recommending a youth for placement, a family team meeting and/or case staffing is convened to explore all possible alternatives, including emergency intervention strategies."
  },
  {
    "Original.order": 27,
    standard: 5,
    new_order: 15,
    value: 6,
    rank: 28,
    milestone:
      "Funding mechanisms exist that incentivize the use of probation and intensive home-based programming over placement by allowing the dollars that would have paid for placement to fund intensive community programming."
  },
  {
    "Original.order": 28,
    standard: 5,
    new_order: 16,
    value: 5,
    rank: 29,
    milestone:
      "Department policy does not mandate out-of-home placement for any youth, regardless of offense or risk profile. Statutory mandates are narrowly applied and tracked annually."
  },
  {
    "Original.order": 31,
    standard: 6,
    new_order: 17,
    value: 4,
    rank: 18,
    milestone: "Diversion is offered and supported using a "
  },
  {
    "Original.order": 32,
    standard: 6,
    new_order: 18,
    value: 5,
    rank: 15,
    milestone:
      "Most youth (60%) accused of delinquent conduct, including those who do not pose a significant risk to public safety, are diverted from juvenile probation."
  },
  {
    "Original.order": 33,
    standard: 6,
    new_order: 19,
    value: 5,
    rank: 16,
    milestone:
      "Law enforcement and schools use alternatives (other than an arrest) for youth involved in disruptive behavior."
  },
  {
    "Original.order": 34,
    standard: 6,
    new_order: 20,
    value: 3,
    rank: 17,
    milestone:
      "Prosecutorial or court-intake diversion is used to informally process youth away from juvenile probation supervision following arrest."
  },
  {
    "Original.order": 35,
    standard: 6,
    new_order: 21,
    value: 7,
    rank: 30,
    milestone:
      "A single community-based organization or a coalition of organizations oversees and coordinates juvenile court diversion."
  },
  {
    "Original.order": 36,
    standard: 6,
    new_order: 22,
    value: 6,
    rank: 11,
    milestone:
      "Informal probation (where youth diverted from formal court processing are overseen by probation officers and required to comply with probation conditions) is not used."
  },
  {
    "Original.order": 39,
    standard: 7,
    new_order: 23,
    value: 5,
    rank: 32,
    milestone:
      "Internal staff, family, and youth survey data are reviewed and evaluated to revise and update policies and programs."
  },
  {
    "Original.order": 40,
    standard: 7,
    new_order: 24,
    value: 7,
    rank: 31,
    milestone:
      "Case reviews are conducted yearly on a random sample of 10% of the annual referrals to decide whether alternative decisions could have been made to avoid youth being held within institutions rather than within the community."
  },
  {
    "Original.order": 41,
    standard: 7,
    new_order: 25,
    value: 5,
    rank: 26,
    milestone:
      "Data analyses and geographic mapping are conducted annually to identify underlying causes for system disparities and imbalances in the quality, availability, and cultural responsiveness of programs and services."
  },
  {
    "Original.order": 44,
    standard: 8,
    new_order: 26,
    value: 6,
    rank: 10,
    milestone:
      "Young people and families, defined broadly, are included in case planning."
  },
  {
    "Original.order": 45,
    standard: 8,
    new_order: 27,
    value: 5,
    rank: 14,
    milestone:
      "Case-plan plans address identified needs, engage young people in positive youth development activities, and contain realistic expectations and goals that are meaningful to and supported by young people and their families."
  },
  {
    "Original.order": 46,
    standard: 8,
    new_order: 28,
    value: 4,
    rank: 19,
    milestone:
      "Probation staff who supervise youth emphasize more of a coach than a referee technique, and the length of supervision is limited to six to nine months, with few cases exceeding one year."
  },
  {
    "Original.order": 47,
    standard: 8,
    new_order: 29,
    value: 4,
    rank: 20,
    milestone:
      "Case management prioritizes incentives to encourage positive behavior by offering opportunities and rewards valued by youth."
  },
  {
    "Original.order": 48,
    standard: 8,
    new_order: 30,
    value: 4,
    rank: 21,
    milestone:
      "Incentives are used more than sanctions within every youth case development plan based on a 5 to 1 ratio."
  },
  {
    "Original.order": 51,
    standard: 9,
    new_order: 31,
    value: 4,
    rank: 8,
    milestone:
      "In collaboration with the court, probation orders limit the number of conditions to 5 or fewer."
  },
  {
    "Original.order": 52,
    standard: 9,
    new_order: 32,
    value: 4,
    rank: 9,
    milestone:
      "In collaboration with the court, probation conditions limit the use conditions in favor of individualized expectations and goals."
  },
  {
    "Original.order": 55,
    standard: 10,
    new_order: 33,
    value: 5,
    rank: 5,
    milestone:
      "Youth who engage in problematic behavior or fail to meet their case plan goals follow a structured decision process that eliminates the use of confinement as a consequence for technical violations."
  },
  {
    "Original.order": 56,
    standard: 10,
    new_order: 34,
    value: 6,
    rank: 7,
    milestone:
      "A supervisory review, including an immediate discussion of available alternatives to confinement, will be conducted for every youth who has violated a probation rule."
  }
]
return {input_data};
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div class="hero">
  <h1>CQI Demo</h1>
</div>
<div class="observablehq observablehq--block"><!--:2c9ce35e:--></div>
<div class="observablehq observablehq--block"><!--:55bed75b:--></div>
<div id="results"> 
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:d6d05c6c:--></div>
<div class="observablehq observablehq--block"><!--:20d825fc:--></div>
<h1 id="these-are-the-milestones-your-jurisdiction-should-priortize-as-you-work-to-improve-probation" tabindex="-1"><a class="observablehq-header-anchor" href="#these-are-the-milestones-your-jurisdiction-should-priortize-as-you-work-to-improve-probation">These are the milestones your jurisdiction should priortize as you work to improve probation:</a></h1>
<ol>
<li>
<h3 id="" tabindex="-1"><a class="observablehq-header-anchor" href="#"><observablehq-loading></observablehq-loading><!--:9edd47db:--><br><br></a></h3>
</li>
<li>
<h3 id="-1" tabindex="-1"><a class="observablehq-header-anchor" href="#-1"><observablehq-loading></observablehq-loading><!--:aba34339:--><br><br></a></h3>
</li>
<li>
<h3 id="-2" tabindex="-1"><a class="observablehq-header-anchor" href="#-2"><observablehq-loading></observablehq-loading><!--:ddaa324f:--><br><br></a></h3>
</li>
</ol>
<p><button onclick="window.print()">Print This Page</button></p>
</div>
<h2 id="standard-1-partnership-with-youth-families-and-communities" tabindex="-1"><a class="observablehq-header-anchor" href="#standard-1-partnership-with-youth-families-and-communities">Standard 1: Partnership with Youth, Families and Communities</a></h2>
<br>
<h3 id="our-probation-department-is-committed-to-engaging-and-partnering-with-youth-families-and-communities-and-relies-on-community-based-organizations-as-the-primary-vehicle-for-the-delivery-of-services-supports-and-interventions-for-young-people" tabindex="-1"><a class="observablehq-header-anchor" href="#our-probation-department-is-committed-to-engaging-and-partnering-with-youth-families-and-communities-and-relies-on-community-based-organizations-as-the-primary-vehicle-for-the-delivery-of-services-supports-and-interventions-for-young-people">Our probation department is committed to engaging and partnering with youth, families and communities and relies on community-based organizations as the primary vehicle for the delivery of services, supports and interventions for young people.</a></h3>
<div class="observablehq observablehq--block"><!--:da8abf7d:--></div>
<h2 id="standard-2-explicit-focus-on-race-equity" tabindex="-1"><a class="observablehq-header-anchor" href="#standard-2-explicit-focus-on-race-equity">Standard 2: Explicit Focus on Race Equity</a></h2>
<br>
<h3 id="our-probation-department-is-committed-to-reducing-and-or-eliminating-racial-and-ethnic-disparities" tabindex="-1"><a class="observablehq-header-anchor" href="#our-probation-department-is-committed-to-reducing-and-or-eliminating-racial-and-ethnic-disparities">Our probation department is committed to reducing and/or eliminating racial and ethnic disparities.</a></h3>
<div class="observablehq observablehq--block"><!--:d4f2602d:--></div>
<div class="observablehq observablehq--block"><!--:db140e8b:--></div>
<div class="observablehq observablehq--block"><!--:536ff05e:--></div>
<div class="observablehq observablehq--block"><!--:14fc2344:--></div>
<div class="observablehq observablehq--block"><!--:84008734:--></div>
<div class="observablehq observablehq--block"><!--:37cfae95:--></div>
<div class="observablehq observablehq--block"><!--:7d6c3b83:--></div>
<div class="observablehq observablehq--block"><!--:ec9cfbb9:--></div>
</main>
</div>
